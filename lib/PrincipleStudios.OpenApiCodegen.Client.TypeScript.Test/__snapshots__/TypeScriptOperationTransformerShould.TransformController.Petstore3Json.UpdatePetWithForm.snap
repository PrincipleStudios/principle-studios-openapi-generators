/*
 * Swagger Petstore
 *
 * This is a sample server Petstore server.  You can find out more about Swagger at [http://swagger.io](http://swagger.io) or on [irc.freenode.net, #swagger](http://swagger.io/irc/).  For this sample, you can use the api key `special-key` to test the authorization filters.
 *
 * OpenAPI spec version: 1.0.0
 * Contact: apiteam@swagger.io
 * Generated by: https://principle.tools
 */
import { HttpHeaders, HttpQuery, RequestOpts, ResponseArgs, throwIfNullOrUndefined, encodeURI, RequestConversion, StandardResponse, TransformRequest } from '@principlestudios/openapi-codegen-typescript';

export type RequestParams = {
    petId: BigInt;
};
export type RequestBodies = {
    'application/x-www-form-urlencoded': {
        name?: string;
        status?: string;
    };
};

export type StructuredResponses = {
    /** Invalid input */
    405: {
        '': undefined;
    };
};
export type Responses = 
    | StandardResponse<405, '', undefined>;

export function updatePetWithForm(params: RequestParams): RequestOpts;
export function updatePetWithForm<K extends keyof RequestBodies>(params: RequestParams, body: RequestBodies[K], mimeType: K): RequestOpts;
export function updatePetWithForm(params: RequestParams, body: RequestBodies[keyof RequestBodies] | null = null, mimeType: keyof RequestBodies | null = null): RequestOpts {
    throwIfNullOrUndefined(params, 'params');
    if (mimeType) throwIfNullOrUndefined(body, 'body');
    if (body)  throwIfNullOrUndefined(mimeType, 'mimeType');
    throwIfNullOrUndefined(params.petId, 'petId');

    const headers: HttpHeaders = {};
    if (mimeType) headers['Content-Type'] = mimeType;

    let actualBody: RequestBodies[keyof RequestBodies] | FormData = body;
    if (mimeType === 'application/x-www-form-urlencoded')
    {
        let formData = new FormData();
        if (body!.name !== undefined) { formData.append('name', body!.name as any); }
        if (body!.status !== undefined) { formData.append('status', body!.status as any); }
        actualBody = formData;
    }

    return {
        path: '/pet/{petId}'.replace('{petId}', encodeURI(params.petId)),
        method: 'POST',
        headers,
        body: actualBody,
    };
}

export const responseConversion = (res: ResponseArgs) => ({
        statusCode: [
            405,
        ].indexOf(res.status) === -1 ? 'other' : res.status,
        mimeType: res.getResponseHeader("Content-Type"),
        data: res.response,
        response: res,
    }) as Responses;

export const conversion: RequestConversion<RequestParams, RequestBodies, Responses, 'optional'> = {
    request: updatePetWithForm,
    response: responseConversion,
};

